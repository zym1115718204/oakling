{% load static %}

<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
	<meta name="description" content="Xenon Boostrap Admin Panel" />
	<meta name="author" content="" />

	<title>Oakling</title>

	<!---->
	<link rel="stylesheet" href="{% static 'assets/css/fonts/linecons/css/linecons.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/fonts/fontawesome/css/font-awesome.min.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/bootstrap.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/xenon-core.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/xenon-forms.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/xenon-components.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/xenon-skins.css' %}">
	<link rel="stylesheet" href="{% static 'assets/css/custom.css' %}">

	<script src="{% static 'assets/js/jquery-1.11.1.min.js' %}"></script>

	<!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!--[if lt IE 9]>
		<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js' %}"></script>
		<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js' %}"></script>
	<![endif]-->


</head>
<body class="page-body">

	<nav class="navbar horizontal-menu navbar-fixed-top navbar-minimal"><!-- set fixed position by adding class "navbar-fixed-top" -->

		<div class="navbar-inner">

			<!-- Navbar Brand -->
			<div class="navbar-brand">
				<a href="/dashboard" class="logo">
					<img src="{% static 'assets/images/logo@3x.png' %}" width="80" alt="" class="hidden-xs" />
					<img src="{% static 'assets/images/logo-white-bg@3x.png' %}" width="80" alt="" class="visible-xs" />
				</a>
			</div>

			<!-- Mobile Toggles Links -->
			<div class="nav navbar-mobile">

				<!-- This will toggle the mobile menu and will be visible only on mobile devices -->
				<div class="mobile-menu-toggle">
					<!-- This will open the popup with user profile settings, you can use for any purpose, just be creative -->
					<a href="#" data-toggle="settings-pane" data-animate="true">
						<i class="linecons-cog"></i>
					</a>

					<a href="#" data-toggle="user-info-menu-horizontal">
						<i class="fa-bell-o"></i>
						<span class="badge badge-success">7</span>
					</a>

					<!-- data-toggle="mobile-menu-horizontal" will show horizontal menu links only -->
					<!-- data-toggle="mobile-menu" will show sidebar menu links only -->
					<!-- data-toggle="mobile-menu-both" will show sidebar and horizontal menu links -->
					<a href="#" data-toggle="mobile-menu-horizontal">
						<i class="fa-bars"></i>
					</a>
				</div>

			</div>

			<div class="navbar-mobile-clear"></div>

			<!-- main menu -->
			<ul class="navbar-nav">
				<li class="opened active">
					<a href="/dashboard">
						<i class="linecons-cog"></i>
						<span class="title">任务中心</span>
					</a>
				</li>
				<li>
					<a href="/dashboard/nodes">
						<i class="linecons-desktop"></i>
						<span class="title">节点</span>
					</a>
				</li>
				<li>
					<a href="/dashboard/data">
						<i class="linecons-note"></i>
						<span class="title">数据中心</span>
					</a>
				</li>
				<li>
					<a href="http://127.0.0.1:5555/" target="_blank">
						<i class="linecons-params"></i>
						<span class="title">任务监控</span>
					</a>
				</li>
				<li>
					<a href="/dashboard/api">
						<i class="linecons-cloud"></i>
						<span class="title">API接口</span>
					</a>
				</li>
			</ul>

			<!-- notifications and other links -->
			<ul class="nav nav-userinfo navbar-right">

				<li class="dropdown xs-left">

					<a href="#" data-toggle="dropdown" class="notification-icon">
						<i class="fa-envelope-o"></i>
						<span class="badge badge-green hidden">0</span>
					</a>

					<ul class="dropdown-menu messages">
                        <li class="external">
                            <a href="#">
                                <span>没有新的消息</span>
                                <i class="fa-link-ext"></i>
                            </a>
                        </li>
					</ul>

				</li>

				<li class="dropdown xs-left">
					<a href="#" data-toggle="dropdown" class="notification-icon notification-icon-messages">
						<i class="fa-bell-o"></i>
						<span class="badge badge-purple hidden">0</span>
					</a>

					<ul class="dropdown-menu notifications">
										<li class="top">
						<p class="small">
							<a href="#" class="pull-right">全部标记为已读</a>
							你有 <strong>0</strong> 条新的提醒.
						</p>
					</li>

					<li>
						<ul class="dropdown-menu-list list-unstyled ps-scrollbar">
							<li class="active notification-success hidden">
								<a href="#">
									<i class="fa-user"></i>

									<span class="line">
										<strong>New user registered</strong>
									</span>

									<span class="line small time">
										30 seconds ago
									</span>
								</a>
							</li>

							<li class="active notification-secondary hidden">
								<a href="#">
									<i class="fa-lock"></i>

									<span class="line">
										<strong>Privacy settings have been changed</strong>
									</span>

									<span class="line small time">
										3 hours ago
									</span>
								</a>
							</li>

							<li class="notification-info">
								<a href="#">
									<i class="fa-database"></i>

									<span class="line">
										服务器工作正常
									</span>

									<span class="line small time">
										昨天 10:30am
									</span>
								</a>
							</li>
						</ul>
					</li>

					<li class="external">
						<a href="#">
							<span>查看所有提醒.</span>
							<i class="fa-link-ext"></i>
						</a>
					</li>
					</ul>
				</li>

				<li class="dropdown user-profile">
					<a href="#" data-toggle="dropdown">
						<img src="{% static 'assets/images/user-1.png' %}" alt="user-image" class="img-circle img-inline userpic-32" width="28" />
						<span>
                            登录
							<i class="fa-angle-down"></i>
						</span>
					</a>

					<ul class="dropdown-menu user-profile-menu list-unstyled">
						<li>
							<a href="#settings">
								<i class="fa-wrench"></i>
								设置
							</a>
						</li>
						<li>
							<a href="#profile">
								<i class="fa-user"></i>
								简介
							</a>
						</li>
						<li>
							<a href="#help">
								<i class="fa-info"></i>
								帮助
							</a>
						</li>
						<li class="last">
							<a href="#logout">
								<i class="fa-lock"></i>
								登出
							</a>
						</li>
					</ul>
				</li>

			</ul>

		</div>

	</nav>

	<div class="page-container"><!-- add class "sidebar-collapsed" to close sidebar by default, "chat-visible" to make chat appear always -->

		<div class="main-content">

			<script>
			jQuery(document).ready(function($)
			{
				$('a[href="#layout-variants"]').on('click', function(ev)
				{
					ev.preventDefault();

					var win = {top: $(window).scrollTop(), toTop: $("#layout-variants").offset().top - 15};

					TweenLite.to(win, .3, {top: win.toTop, roundProps: ["top"], ease: Sine.easeInOut, onUpdate: function()
						{
							$(window).scrollTop(win.top);
						}
					});
				});
			});
			</script>

			<div class="row">

				<div class="panel panel-default">
					<h1>
						<p class="text-secondary"><strong>{{ project.name }}</strong></p>
					</h1>
					<p>
						任务参数
					</p>

					<div class="row">

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-user"></i>
								<span>状态</span>
							</a>
						</div>
						<div class="col-sm-2">
							<pre>{% if project.status == 0 %}停止{% elif project.status == 1 %}运行{% elif project.status == 2 %}调试{% elif project.status == 3 %}失效{% endif %}</pre>
						</div>

						<div class="col-sm-6">
							<a href="#" class="btn btn-block btn-secondary btn-icon btn-icon-standalone btn-icon-standalone-right btn-single text-left hidden">
								<i class="fa-print"></i>
								<span>调试</span>
							</a>
						</div>
						<div class="col-sm-2">
							<a href="/dashboard/debug/{{ project.name }}" class="btn btn-block btn-secondary btn-icon btn-icon-standalone btn-icon-standalone-right btn-single text-left">
								<i class="fa-print"></i>
								<span>开始调试</span>
							</a>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-cog"></i>
								<span>简介</span>
							</a>
						</div>
						<div class="col-sm-2">
							<pre>{{ project.info }}</pre>
						</div>

					</div>
				</div>
			</div>


			<!--<div class="panel-heading hidden-print">Project</div>-->
				<!--<div class="panel-body">-->

					<!--<section class="invoice-env">-->

						<!--&lt;!&ndash; Invoice header &ndash;&gt;-->
						<!--<div class="invoice-header col-sm-12">-->

							<!--&lt;!&ndash; Invoice Options Buttons &ndash;&gt;-->
							<!--&lt;!&ndash;<div class="invoice-options hidden-print">&ndash;&gt;-->
								<!--&lt;!&ndash;<a href="/dashboard/debug/{{ project.name }}" class="btn btn-block btn-secondary btn-icon btn-icon-standalone btn-icon-standalone-right text-left">&ndash;&gt;-->
									<!--&lt;!&ndash;<i class="fa-envelope-o"></i>&ndash;&gt;-->
									<!--&lt;!&ndash;<span>Debug</span>&ndash;&gt;-->
								<!--&lt;!&ndash;</a>&ndash;&gt;-->

								<!--&lt;!&ndash;<a href="#" class="btn btn-block btn-secondary btn-icon btn-icon-standalone btn-icon-standalone-right btn-single text-left">&ndash;&gt;-->
									<!--&lt;!&ndash;<i class="fa-print"></i>&ndash;&gt;-->
									<!--&lt;!&ndash;<span>Print</span>&ndash;&gt;-->
								<!--&lt;!&ndash;</a>&ndash;&gt;-->
							<!--</div>-->


							<!--&lt;!&ndash; Invoice Data Header &ndash;&gt;-->
							<!--<div class="invoice-details">-->

								<!--<p class="text-secondary"><strong style="font-size: 27px; margin-bottom: 9px;">{{ project.name}}</strong></p>-->
								<!--&lt;!&ndash;<strong>{{ project.name}}</strong>&ndash;&gt;-->

								<!--<ul class="list-unstyled">-->
									<!--<li class="upper">ID     :   {{ project.id}}</li>-->
									<!--&lt;!&ndash;<li class="upper">INFO   :   {{ project.info}}</li>&ndash;&gt;-->
									<!--&lt;!&ndash;<li>Type:      {{ project.type }}</li>&ndash;&gt;-->
									<!--&lt;!&ndash;<li>timeout:    {{ project.time_out }}</li>&ndash;&gt;-->
									<!--&lt;!&ndash;<li>status:     {{ project.status }}</li>&ndash;&gt;-->
									<!--&lt;!&ndash;<li>priority:   {{ project.priority }}</li>&ndash;&gt;-->
									<!--&lt;!&ndash;<li>Update On {{ project.update_time }}</li>&ndash;&gt;-->
									<!--<li class="upper">Create On : {{ project.add_time }}</li>-->
								<!--</ul>-->

							<!--</div>-->

						<!--</div>-->


						<!--&lt;!&ndash; Client and Payment Details &ndash;&gt;-->
						<!--<div class="invoice-details col-sm-6">-->

							<!--<div class="invoice-client-info">-->
								<!--<strong>Settings</strong>-->

								<!--<ul class="list-unstyled">-->
									<!--<li>Group        :</li>-->
									<!--<li>Type         : </li>-->
									<!--<li>Priority     :</li>-->
									<!--<li>Timeout      :</li>-->
									<!--<li>Interval     :</li>-->
									<!--<li>Parameters   :</li>-->
									<!--<li>Update On    :</li>-->
								<!--</ul>-->

								<!--<ul class="list-unstyled">-->
									<!--<li>{{ project.group }} </li>-->
									<!--<li>{{ project.type }} </li>-->
									<!--<li>{{ project.priority }} </li>-->
									<!--<li>{{ project.timeout }} </li>-->
									<!--<li>{{ project.interval }} </li>-->
									<!--<li>{{ project.args }} </li>-->
									<!--<li>{{ project.update_time }} </li>-->
								<!--</ul>-->
							<!--</div>-->
						<!--</div>-->


						<!--<div class="invoice-details col-sm-6">-->
							<!--<div class="invoice-client-info">-->
								<!--<strong>Settings</strong>-->

								<!--<ul class="list-unstyled">-->
									<!--<li>Group        :</li>-->
									<!--<li>Type         : </li>-->
									<!--<li>Priority     :</li>-->
									<!--<li>Timeout      :</li>-->
									<!--<li>Interval     :</li>-->
									<!--<li>Parameters   :</li>-->
									<!--<li>Update On    :</li>-->
								<!--</ul>-->

								<!--<ul class="list-unstyled">-->
									<!--<li>{{ project.group }} </li>-->
									<!--<li>{{ project.type }} </li>-->
									<!--<li>{{ project.priority }} </li>-->
									<!--<li>{{ project.timeout }} </li>-->
									<!--<li>{{ project.interval }} </li>-->
									<!--<li>{{ project.args }} </li>-->
									<!--<li>{{ project.update_time }} </li>-->
								<!--</ul>-->
							<!--</div>-->

						<!--</div>-->





						 <!--&lt;!&ndash;Invoice Subtotals and Totals &ndash;&gt;-->
						<!--<div class="invoice-totals">-->

							<!--<div class="invoice-subtotals-totals">-->
								<!--<span>-->
									<!--Sub - Total amount:-->
									<!--<strong>$6,487</strong>-->
								<!--</span>-->

								<!--<span>-->
									<!--VAT:-->
									<!--<strong>12.9%</strong>-->
								<!--</span>-->

								<!--<span>-->
									<!--Discount:-->
									<!--<strong>-&#45;&#45;&#45;&#45;</strong>-->
								<!--</span>-->

								<!--<hr>-->

								<!--<span>-->
									<!--Grand Total:-->
									<!--<strong>$7,304</strong>-->
								<!--</span>-->
							<!--</div>-->

							<!--<div class="invoice-bill-info">-->
								<!--<address>-->
									<!--795 Park Ave, Suite 120<br>-->
									<!--San Francisco, CA 94107<br>-->
									<!--P: (234) 145-1810 <br>-->
									<!--Full Name <br>-->
									<!--<a href="#">first.last@email.com</a>-->
								<!--</address>-->
							<!--</div>-->

						<!--</div>-->

					<!--</section>-->

				<!--</div>-->
			<!--</div>-->


			<div class="row">

				<div class="panel panel-default">
					<div class="panel-heading">
						<h3 class="panel-title">最近运行的任务耗时统计</h3>
						<div class="panel-options">
							<a href="#" data-toggle="panel">
								<span class="collapse-icon">&ndash;</span>
								<span class="expand-icon">+</span>
							</a>
							<a href="#" data-toggle="remove">
								&times;
							</a>
						</div>
					</div>
					<div class="panel-body">
						<script type="text/javascript">

							jQuery(document).ready(function($)
								{
									var opts = {
										"closeButton": true,
										"debug": false,
										"positionClass": "toast-top-right",
										"onclick": null,
										"showDuration": "500",
										"hideDuration": "1000",
										"timeOut": "5000",
										"extendedTimeOut": "1000",
										"showEasing": "swing",
										"hideEasing": "linear",
										"showMethod": "fadeIn",
										"hideMethod": "fadeOut"
									};

									updateTaskStatus();

									// Update Recent Task Status
									function updateTaskStatus() {

										$.ajax({
											url: "/api/v1/command/task",
											method: 'GET',
											dataType: 'json',
											data: {
												project: "{{ project.name }}", // Defined in result page script.
												page: 1,
												rows: 200
											},
											success: function(resp) {
												show_loading_bar({
													delay: .5,
													pct: 100,
													finish: function () {
														// Redirect after successful login page (when progress bar reaches 100%)
														if (resp.status == true) {
															toastr.success(resp.message, "Message:", opts);
															var result = resp.result;
															var task = result.task;
															var _dataSource = [];

															console.log(result);
															console.log(task);

															var rowCount = task.length;

															for (var i = 0; i < rowCount; i++) {

																var _task = task[i];
																var id = _task.update_time;
																var spend_time = (_task.spend_time * 100)/100;
																_dataSource.push({id: id, time: spend_time})
															}

															console.log(_dataSource);

															$("#bar-1").dxChart({
																dataSource: _dataSource,
																series: {
																	argumentField: "id",
																	valueField: "time",
																	name: "Spend Time",
																	type: "bar",
																	color: '#68b828'
																}
															});
														}
														else {
															toastr.error("Update Data Failed", "Message:", opts);
														}
													}
												})
											}
										});
									}

									$("#task-update").on('click', function()
										{
											console.log("active");
											updateTaskStatus();
										});

									console.log("activejs");
								});

						</script>
						<div id="bar-1" style="height: 440px; width: 100%;"></div>
						<br />
						<!--<a href="#"  id="task-update" class="btn btn-primary btn-small">Update</a>-->
					</div>
				</div>

			</div>


			<div class="row">
				<div class="panel panel-default">
					<h1>
						<p class="text-secondary"><strong>任务设置</strong></p>
					</h1>
					<p>
						任务的详细参数
					</p>

					<div class="row">

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-user"></i>
								<span>名称</span>
							</a>
						</div>
						<div class="col-sm-4">
							<pre>{{  project.name }}</pre>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-cog"></i>
								<span>组</span>
							</a>
						</div>
						<div class="col-sm-4">
							<pre>{{ project.group }}</pre>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-cog"></i>
								<span>priority</span>
							</a>
						</div>
						<div class="col-sm-4">
							<pre>{{ project.priority }}</pre>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-cog"></i>
								<span>参数</span>
							</a>
						</div>
						<div class="col-sm-4">
							<pre>{{ project.args }}</pre>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-cog"></i>
								<span>类型</span>
							</a>
						</div>
						<div class="col-sm-4">
							<pre>{{ project.type }}</pre>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

{#						<div class="col-sm-2">#}
{#							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >#}
{#								<i class="linecons-cog"></i>#}
{#								<span>type</span>#}
{#							</a>#}
{#						</div>#}
{#						<div class="col-sm-4">#}
{#							<pre>{{ project.type }}</pre>#}
{#						</div>#}

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-secondary btn-block btn-icon btn-icon-standalone text-left" >
								<i class="linecons-cog"></i>
								<span>运行间隔</span>
							</a>
						</div>
						<div class="col-sm-4">
							<pre>{{ project.interval }}</pre>
						</div>

					</div>



					<h1><strong>模型与脚本</strong></h1>
					<p>任务的详细参数</p>

					<div class="row">

						<div class="col-xs-2 text-muted">项目</div>
						<div class="col-xs-10 text-muted">内容</div>


						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-orange btn-block btn-icon btn-icon-standalone text-left" data-toggle="chat">
								<i class="fa-comment-o"></i>
								<span> <strong>脚本 </strong></span>
							</a>
						</div>
						<div class="col-sm-10">
							<pre>{{ project.script }}</pre>
						</div>

						<div class="clearfix"></div>
						<div class="vspacer v4"></div>

						<div class="col-sm-2">
							<a href="#" class="btn btn-orange btn-block btn-icon btn-icon-standalone text-left" data-toggle="chat">
								<i class="fa-comment-o"></i>
								<span> <strong>模型 </strong></span>
							</a>
						</div>
						<div class="col-sm-10">
							<pre>{{ project.models }}</pre>
						</div>

					</div>

				</div>
			</div>


			<!---->
			<!-- Main Footer -->
			<!-- Choose between footer styles: "footer-type-1" or "footer-type-2" -->
			<!-- Add class "sticky" to  always stick the footer to the end of page (if page contents is small) -->
			<!-- Or class "fixed" to  always fix the footer to the end of page -->
			<footer class="main-footer sticky footer-type-1">

				<div class="footer-inner">

					<!-- Add your copyright text here -->

					<!-- Go to Top Link, just add rel="go-top" to any link to add this functionality -->
					<div class="go-up">

						<a href="#" rel="go-top">
							<i class="fa-angle-up"></i>
						</a>

					</div>

				</div>

			</footer>


	</div>

	</div>

	<!-- Imported styles on this page -->
	<link rel="stylesheet" href="{% static 'assets/js/icheck/skins/all.css' %}">
	<link rel="stylesheet" href="{% static 'assets/js/toastr/toastr.min.css' %}">

	<!-- Imported scripts on this page -->
	<script src="{% static 'assets/js/icheck/icheck.min.js' %}"></script>

	<!-- Bottom Scripts -->
	<script src="{% static 'assets/js/bootstrap.min.js' %}"></script>
	<script src="{% static 'assets/js/TweenMax.min.js' %}"></script>
	<script src="{% static 'assets/js/resizeable.js' %}"></script>
	<script src="{% static 'assets/js/joinable.js' %}"></script>
	<script src="{% static 'assets/js/xenon-api.js' %}"></script>
	<script src="{% static 'assets/js/xenon-toggles.js' %}"></script>

    <!-- Imported scripts on  message-->
    <script src="{% static 'assets/js/toastr/toastr.min.js' %}"></script>
	<script src="{% static 'assets/js/jquery-validate/jquery.validate.min.js' %}"></script>
	<script src="{% static 'assets/js/devexpress-web-14.1/js/globalize.min.js' %}"></script>
	<script src="{% static 'assets/js/devexpress-web-14.1/js/dx.chartjs.js' %}"></script>
	<script src="{% static 'assets/js/xenon-widgets.js' %}"></script>

	<!-- JavaScripts initializations and stuff -->
	<script src="{% static 'assets/js/xenon-custom.js' %}"></script>
	<!--<script src="{% static 'assets/js/xspider.js' %}"></script>-->

</body>
</html>